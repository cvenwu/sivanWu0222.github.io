---
title: 算法课作业
author: yirufeng
pin: true
toc: true
mathjax: false
categories:
  - null
tags:
  - null
  - null
date: 2020-12-21 20:50:08
summary:
---

{% note info, note info 默认主题色，适合中性的信息 %}

## 八皇后问题：
### 分治法
{% noteblock, 思路 %}
1. 对于每一行有8个选择，
2. 通过规则去掉不可以选择的，
3. 对剩下可以选择的进行递归，递归达到结束条件就产生一种可能
4. 撤销选择
{% endnoteblock %}

{% folding green, 代码 %}
```go
package main

import (
	"fmt"
)

/**
 * @Author: yirufeng
 * @Date: 2020/12/21 4:42 下午
 * @Desc: 
 **/

//输入：N表示N行N列
//输出：一共有多少种摆放的方法
func process(n int) int {
	if n <= 0 {
		return 0
	}
	count := 0
	record := make([]int, n)

	var ret [][][]int
	backtrack(0, n, &count, record, &ret)
	showRet(&ret)
	return count
}

func showRet(ret *[][][]int) {
	fmt.Printf("-------------------------------一共有%d种解法-------------------------------\n", len(*ret))
	for i := 0; i < len(*ret); i++ {
		fmt.Printf("第%d种解法\n", i+1)
		fmt.Println((*ret)[i])
	}
}


func printToRet(ret *[][][]int, record []int) {
	//初始化一个matrix
	matrix := make([][]int, len(record))

	for i := 0; i < len(record); i++ {
		for j := 0; j < len(record); j++ {
			if record[i] != j {
				matrix[i] = append(matrix[i], 0)
			} else {
				matrix[i] = append(matrix[i], 1)
			}
		}
	}

	*ret = append(*ret, matrix)
}

//表示当前应该在第i行进行选择
func backtrack(i, n int, count *int, record []int, ret *[][][]int) {
	//如果满足结束条件
	if i == n {
		//将结果打印到我们的ret中
		printToRet(ret, record)
		*count++
		return
	}

	//做选择
	for index := 0; index < n; index++ {
		if isValid(record, i,  index) { //判断在第i行的index列放置皇后是否和之前放置的冲突
			record[i] = index
			backtrack(i+1, n, count, record, ret)
			record[i] = 0
		}
	}
}

//判断走的路径是否有效
//第一个参数record中的每一个元素表示对应行放置的皇后在第几列，例如record[0]=3表示第0行放置的皇后在第3列
func isValid(record []int, row, col int) bool {
	//首先判断一下是否在该列上已经有了数字
	for i := 0; i < row; i++ {
		//说明该列长出现过该数字,或者没有出现过但是是对角线上的
		if record[i] == col || abs(row, i) == abs(col, record[i]) {
			return false
		}
	}
	return true
}

func abs(a, b int) int {
	if a > b {
		return a - b
	}
	return b - a
}

func main() {
	//使用8个皇后对应92种解法
	process(8)
}

```
{% endfolding %}


### 分治法